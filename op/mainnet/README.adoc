= OP Mainnet Node

Full-node setup, using **op-reth** and **op-node**.

NOTE: op-reth cannot sync OP Mainnet from genesis. Either restore from a full reth snapshot or bootstrap the pre-Bedrock state before the first run.

== Steps

. Copy and configure environment:
+
[source,sh]
----
cp .env.example .env
# Edit .env with your L1 RPC endpoints if needed
----

. Generate JWT token:
+
[source,sh]
----
./generate-jwt-token.sh
----

. Bootstrap data (pick one):

.. *Option A — Restore from snapshot (recommended):*
+
Download a full reth snapshot from https://datadirs.optimism.io:
+
[source,sh]
----
wget https://datadirs.optimism.io/mainnet-reth-full-2026-02-09.tar.zst
----
+
Extract snapshot into the volume:
+
[source,sh]
----
tar -I zstd -xvf mainnet-reth-full-2026-02-09.tar.zst
docker run --rm \
  -v op-mainnet-reth:/data \
  -v $(pwd)/reth:/import busybox \
  sh -c "mv /import/* /data/ && rm -rf /import"
rm -rf ./reth
----

.. *Option B — Bootstrap Bedrock state:*
+
Download the pre-Bedrock state from https://datadirs.optimism.io and decompress it:
+
[source,sh]
----
wget https://datadirs.optimism.io/op-mainnet-pre-bedrockstate.zst
unzstd op-mainnet-pre-bedrockstate.zst
----
+
Import it into the Docker volume:
+
[source,sh]
----
docker run --rm \
  -v op-mainnet-reth:/data \
  -v $(pwd)/op-mainnet-pre-bedrockstate:/import/op-mainnet-pre-bedrockstate \
  ghcr.io/paradigmxyz/op-reth:v1.9.3 \
  init-state --without-ovm --chain optimism --datadir /data /import/op-mainnet-pre-bedrockstate
----

. Run containers:
+
[source,sh]
----
docker compose up --detach
----

. Check sync status:
+
[source,sh]
----
curl -s http://localhost:23011 -X POST -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","method":"optimism_syncStatus","params":[],"id":1}' | jq
----
