= OP Mainnet Node

Full-node setup, using **op-reth** and **op-node**.

NOTE: op-reth cannot sync OP Mainnet from genesis. The pre-Bedrock state (block 105,235,063) must be imported before the first run.

== Steps

. Copy and configure environment:
+
[source,sh]
----
cp .env.example .env
# Edit .env with your L1 RPC endpoints if needed
----

. Generate JWT token:
+
[source,sh]
----
./generate-jwt-token.sh
----

. Bootstrap Bedrock state:
+
Download the state snapshot from https://datadirs.optimism.io and decompress it:
+
[source,sh]
----
wget https://datadirs.optimism.io/op-mainnet-pre-bedrockstate.zst
unzstd op-mainnet-pre-bedrockstate.zst
----
+
Import it into the Docker volume:
+
[source,sh]
----
docker run --rm \
  -v op-mainnet-reth:/data \
  -v $(pwd)/op-mainnet-pre-bedrockstate:/import/op-mainnet-pre-bedrockstate \
  ghcr.io/paradigmxyz/op-reth:v1.9.3 \
  init-state --without-ovm --chain optimism --datadir /data /import/op-mainnet-pre-bedrockstate
----

. Run containers:
+
[source,sh]
----
docker compose up --detach
----

. Check sync status:
+
[source,sh]
----
curl -s http://localhost:23011 -X POST -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","method":"optimism_syncStatus","params":[],"id":1}' | jq
----
